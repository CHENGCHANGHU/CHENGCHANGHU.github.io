!function(){var t={91:function(t,e,n){"use strict";function r(t){const{tag:e,text:n,html:a,children:o,attributes:s,events:i}=t,l=document.createElement(e);return a&&(l.innerHTML=a),n&&(l.innerText=n),s&&Object.keys(s).forEach((t=>{"classes"===t?l.className=s[t].join(" "):l.setAttribute(t,s[t])})),i&&Object.keys(i).forEach((e=>{l.addEventListener(e,i[e].bind(t))})),o&&o.forEach((t=>l.appendChild(r(t)))),l}function a(t){if(!t)return;if(t instanceof HTMLElement)return t;if(Array.isArray(t))return t.map((t=>a(t)));const{tag:e,text:n,html:r,children:o,attributes:s,events:i}=t;if(!e)return document.createElement("template");const l=document.createElement(e);return r&&(l.innerHTML=r),(n||0===n||""===n)&&(l.innerText=n),s&&Object.keys(s).forEach((t=>{"classes"===t&&Array.isArray(s[t])?l.className=s[t].join(" "):l.setAttribute("classes"===t?"class":t,s[t])})),i&&Object.keys(i).forEach((e=>{l.addEventListener(e,i[e].bind(t))})),o&&l.append(...o.filter(Boolean).map(a)),l}function o({tag:t,text:e,html:n,parent:a,children:o,attributes:s}){a&&a.appendChild(r({tag:t,text:e,html:n,children:o,attributes:s}))}function s({tag:t,text:e,attributes:n}){return`<${t}${n?" "+Object.keys(n).map((t=>"classes"===t?`class="${n[t].join(" ")}"`:`${t}="${n[t]}"`)).join(" "):""}">${e}</${t}>`}function i(t){const e=new Map;if(!e.has(t)){const n=document.getElementById(t);if(!n)return null;e.set(t,n)}return e.get(t)}function l(t,e,n){const r=t.getAttribute("style")||"";new RegExp(`${e}`,"g").test(r)?t.setAttribute("style",r.replaceAll(new RegExp(`(${e}: )[\\w\\.]+(;)`,"g"),`$1${n}$2`)):t.setAttribute("style",`${r} ${e}: ${n};`)}n.r(e),n.d(e,{getElement:function(){return r},createElement:function(){return a},appendElement:function(){return o},elementString:function(){return s},id:function(){return i},setInlineStyle:function(){return l}})},515:function(t,e,n){const{createElement:r}=n(91);function a(t){return t.replace(/^(.*)\*\*(.+)\*\*(.*)$/g,((t,e,n,r)=>`${e}<strong>${n}</strong>${r}`)).replace(/^(.*)\*(.+)\*(.*)$/g,((t,e,n,r)=>`${e}<i>${n}</i>${r}`)).replace(/^([^\[]*)\[(.*)\]\((.*)\)(.*)$/g,((t,e,n,r,a)=>`${e}<a href="${r}" target="_blank">${n}</a>${a}`))}t.exports=function(t,e={indent:16}){const n=[];let o=0,s="",i=!1;t.replace(/\\r\\n/g,"\n");for(let e of t)i?(n.push(s),n.push("\n"),s="",o++,i=!1):"\r"!==t[o]||"\n"!==t[o+1]?"\n"!==e&&"\r"!==e?(s+=e,o++):(n.push(s),n.push("\n"),s="",o++):(i=!0,o++);n.push(s),console.log(n);const l=n.reduce((({options:t,lastNodeType:e,status:n},r,o)=>{let s=null;if((s=r.match(/^(\s*)```([^`]*)$/))&&"code-block-start"!==e)return t.push({tag:"div",attributes:{classes:`code-block-index-${o}`,style:`--indent: ${16*s[1].length}px`,"data-code-type":s[2],"data-code-block-index":o},children:[{tag:"pre",text:"",attributes:{classes:`code-block-index-${o}-line-box`}},{tag:"pre",text:"",attributes:{classes:`code-block-index-${o}-code-box`}}]}),{options:t,lastNodeType:"code-block-start",status:{skipNextLine:!0}};if((s=r.match(/^(\s*)```(\s*)$/))&&"code-block-start"===e){const e=t.at(-1),n=e.attributes["data-code-block-index"];return e.children.push({tag:"style",text:`\n            .code-block-index-${n} {\n              display: flex;\n              flex-flow: row nowrap;\n              column-gap: 4px;\n              padding: 8px 16px;\n              border-radius: 4px;\n              background-color: #aaa;\n              box-sizing: border-box;\n              max-height: 400px;\n              overflow-y: auto;\n            }\n            .code-block-index-${n}-line-box,\n            .code-block-index-${n}-code-box {\n              color: #ccc;\n              font-family: monospace;\n              white-space: pre;\n              line-height: 14px;\n              padding: 4px 0;\n            }\n            .code-block-index-${n}-line-box {\n              color: #343434;\n              text-align: right;\n            }\n            .code-block-index-${n}-code-box {\n              flex: 1;\n              height: 100%;\n              padding-left: 4px;\n              border-radius: 4px;\n              background-color: #222;\n            }\n          `}),{options:t,lastNodeType:"code-block-end"}}if("code-block-start"===e){if(n&&n.skipNextLine)return{options:t,lastNodeType:"code-block-start"};const{attributes:{"data-code-block-index":e},children:[a,s]}=t.at(-1);return"\n"!==r&&(a.text+=(o-e-2)/2+":\n"),console.log(o,e,r),s.text+=r,{options:t,lastNodeType:"code-block-start"}}if(""===r)return t.push({tag:"div",text:"",attributes:{"data-split":"true"}}),{options:t,lastNodeType:"split"};if(s=r.match(/^(#+) (.+?)$/))return t.push({tag:`h${s[1].length}`,html:a(s[2].trim())}),{options:t,lastNodeType:"heading"};if(s=r.match(/^(\s*)(>+) (.+?)$/)){const n=t[t.length-1];return"quote"===e&&s[1].length===n.attributes["data-indent"]?n.html+="<br>"+a(s[3].trim()):t.push({tag:"p",html:a(s[3].trim()),attributes:{style:`--indent: ${16*s[1].length}px`,classes:"block-quotes","data-indent":s[1].length}}),{options:t,lastNodeType:"quote"}}if(s=r.match("tablerow"===e?/^(\|[^\|]*)+\|$/:/^(\|[^\|]+)+\|$/)){const n=t[t.length-1];let s=0;"tablerow"===e&&(s=n.children[0].children.length);const i=r.slice(1,r.length-1).split("|").map(((t,e)=>{const n={"data-row-index":s,"data-col-index":e,rowspan:1,colspan:1};return t=t.replace(/(.*)(?<! )\(-(\d+)\)(.*)/,((t,e,r,a)=>(n.colspan=parseInt(r),`${e}${a}`))).replace(/(.*)(?<! )\(=(\d+)\)(.*)/,((t,e,r,a)=>(n.rowspan=parseInt(r),`${e}${a}`))),n["data-row-span"]=n.rowspan,n["data-col-span"]=n.colspan,{tag:"td",html:a(t.trim()),attributes:{...n}}}));if(i.reduce(((t,e)=>(e.attributes["data-col-index"]=t,t+e.attributes["data-col-span"])),0),n&&n.tableRowShadow&&(n.tableRowShadow=n.tableRowShadow.filter((t=>s<t.rowIndex+t.rowSpan)),n.tableRowShadow.forEach((t=>{i.filter((e=>e.attributes["data-col-index"]>=t.colIndex)).forEach((e=>e.attributes["data-col-index"]+=t.colSpan))}))),"tablerow"!==e){const e=i.filter((t=>t.attributes["data-row-span"]>1)).map((({attributes:{"data-row-index":t,"data-col-index":e,"data-row-span":n,"data-col-span":r}})=>({rowIndex:t,colIndex:e,rowSpan:n,colSpan:r}))),n=Math.max(e.reduce(((t,e)=>Math.max(t,e.rowSpan)),0),1);return t.push({tag:"table",attributes:{classes:`table-index-${o}`},children:[{tag:"tbody",children:[{tag:"tr",children:i}]},{tag:"style",text:`.table-index-${o} tr:nth-child(-n+${n}) td { font-weight: 500; background-color: #dedede; }`}],tableRowShadow:e}),{options:t,lastNodeType:"tablerow"}}if(/^[\|:\-]+$/.test(r)){const e=r.slice(1,r.length-1).split("|").map(((t,e)=>/^:\-+:$/.test(t)?`.${n.attributes.classes} td[data-col-index="${e}"] { text-align: center; }`:/^\-+:$/.test(t)?`.${n.attributes.classes} td[data-col-index="${e}"] { text-align: right; }`:"")).join(" ");return n.children.push({tag:"style",text:e}),{options:t,lastNodeType:"tablerow"}}return n.tableRowShadow.push(...i.filter((t=>t.attributes["data-row-span"]>1)).map((({attributes:{"data-row-index":t,"data-col-index":e,"data-row-span":n,"data-col-span":r}})=>({rowIndex:t,colIndex:e,rowSpan:n,colSpan:r})))),n.children[0].children.push({tag:"tr",children:i}),{options:t,lastNodeType:"tablerow"}}return(s=r.match(/^[\*-_]{3,}$/))?(t.push({tag:"hr"}),{options:t,lastNodeType:"horizontal-rule"}):(s=r.match(/^(\s*)\- (.*)$/))?(t.push({tag:"li",html:a(s[2].trim()),attributes:{style:`--indent: ${16*s[1].length}px`}}),{options:t,lastNodeType:"list-item"}):(s=r.match(/^(\s*)([^<>\n]+)$/))?(t.push({tag:"p",html:a(s[2].trim()),attributes:{style:`--indent: ${16*s[1].length}px`}}),{options:t,lastNodeType:"paragraph"}):"\n"!==r?(t.push({tag:"p",html:a(r.trim())}),{options:t,lastNodeType:"paragraph"}):{options:t,lastNodeType:e}}),{options:[],lastNodeType:"",status:{}}).options;return console.log(l),l.map(r)}}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){"use strict";class t extends HTMLElement{#t=null;#e=null;#n=null;constructor(){super(),this.#t=this.attachShadow({mode:"closed"}),this.#t.appendChild(document.getElementById("page-header").content.cloneNode(!0)),this.#e=this.#t.querySelector("#manuscript-logo-img"),this.#n=this.#t.querySelector("#manuscript-logo-text")}connectedCallback(){this.#e.addEventListener("click",this.#r),this.#n.addEventListener("click",this.#r)}#r(){const t=window.location.href;console.log(t),/manuscript/.test(t)?window.location.assign("/manuscript"):window.location.assign("/")}}document.getElementById("page-header")||(document.body.innerHTML+='<template id="page-header">\r\n  <style>\r\n    .page-header-box {\r\n      --logoSize: 36px;\r\n\r\n      position: sticky;\r\n      width: 100vw;\r\n      height: 48px;\r\n      top: 0;\r\n      display: flex;\r\n      flex-flow: row nowrap;\r\n      align-items: center;\r\n      padding: 0 8px;\r\n      font-size: 12px;\r\n      box-sizing: border-box;\r\n      z-index: 9999;\r\n      background-color: #32343d;\r\n      box-sizing: border-box;\r\n      box-shadow: 0px 5px 10px #afafaf;\r\n      color: #ffffff;\r\n    }\r\n\r\n    .manuscript-logo-box {\r\n      display: flex;\r\n      flex-flow: row nowrap;\r\n      align-items: center;\r\n    }\r\n\r\n    .manuscript-logo-img {\r\n      width: var(--logoSize);\r\n      transform: rotateY(180deg);\r\n      border: 1px solid #343434;\r\n      border-radius: 50%;\r\n      cursor: pointer;\r\n      background-color: #fff;\r\n    }\r\n\r\n    .manuscript-logo-text {\r\n      text-decoration: underline;\r\n      font-weight: bolder;\r\n      transition: all .3s ease-in-out;\r\n      cursor: pointer;\r\n      margin-left: 8px;\r\n    }\r\n\r\n    .manuscript-logo-text:hover {\r\n      color: rgb(3, 145, 98);\r\n    }\r\n\r\n    .page-title-box {\r\n      margin-left: 16px;\r\n      font-size: 16px;\r\n      font-weight: bolder;\r\n    }\r\n  </style>\r\n  <div class="page-header-box">\r\n    <div class="manuscript-logo-box">\r\n      <img\r\n        id="manuscript-logo-img"\r\n        class="manuscript-logo-img"\r\n        src="/assets/images/writing.a59d3288.png"\r\n        alt="tigercheng manuscript logo"\r\n      />\r\n      <div\r\n        id="manuscript-logo-text"\r\n        class="manuscript-logo-text"\r\n      >ALLX Manuscript (Loom)</div>\r\n    </div>\r\n    <div class="page-title-box">\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</template>'),customElements.define("page-header",t);var e=n(91);class r extends HTMLElement{#a=null;#o=null;#s=null;#i="";#l="";#d="";#c="";#p="";static get observedAttributes(){return["rows","cols","resize","placeholder"]}#u(t,e){this.#l=parseInt(e),this.#s.setAttribute("rows",this.#l)}#h(t,e){this.#d=parseInt(e),this.#s.setAttribute("cols",this.#d)}#x(t,n){this.#c=n,(0,e.setInlineStyle)(this.#s,"resize",this.#c)}#g(t,e){this.#p=e,this.#s.setAttribute("placeholder",this.#p)}#b(t){return()=>{this.dispatchEvent(new CustomEvent("e-textarea-input",{bubbles:!1,cancelable:!1,composed:!0,detail:{data:this.#s.value}}))}}setData(t){this.#s.value=t}clearData(){this.#s.value=""}constructor(){super(),this.#a=this.attachShadow({mode:"closed"}),this.#a.appendChild((0,e.id)("e-textarea-template").content.cloneNode(!0)),this.#o=this.#a.querySelector("#e-textarea-box"),this.#s=this.#a.querySelector("#textarea"),this.#s.addEventListener("input",(t=>this.#b(t)()))}attributeChangedCallback(t,e,n){switch(console.log("[attributeChangedCallback]"),t){case"rows":this.#u(e,n);break;case"cols":this.#h(e,n);break;case"resize":this.#x(e,n);break;case"placeholder":this.#g(e,n)}}connectedCallback(){console.log("[connectedCallback]"),this.#d||(0,e.setInlineStyle)(this.#s,"width","100%")}}(0,e.id)("e-textarea-templat")||(document.body.innerHTML+='<template id="e-textarea-template">\r\n  <style>\r\n    * {\r\n      margin: 0;\r\n      padding: 0;\r\n    }\r\n    .e-textarea-box {\r\n      /* padding: 8px; */\r\n    }\r\n    textarea {\r\n      padding: 8px;\r\n      border: 1px solid #343434;\r\n      border-radius: 4px;\r\n      outline: none;\r\n      box-sizing: border-box;\r\n    }\r\n    textarea:focus {\r\n      border-color: rgb(72, 128, 248);\r\n      outline: 2px solid rgb(206, 218, 246);\r\n      outline-offset: 0px;\r\n    }\r\n  </style>\r\n  <div id="e-textarea-box" class="e-textarea-box">\r\n    <textarea part="textarea" name="" id="textarea" cols="50" rows="5"></textarea>\r\n  </div>\r\n</template>'),customElements.define("e-textarea",r);var a=n(515),o=n.n(a);window.addEventListener("load",(function(){(0,e.id)("markdown-textarea").addEventListener("input",(t=>{console.log(t.target.innerText);const n=t.target.innerText,r=(0,e.id)("markdown-preview").scrollTop;(0,e.id)("markdown-preview").innerHTML="",(0,e.id)("markdown-preview").append(...(0,e.createElement)(o()(n))),(0,e.id)("markdown-preview").scrollTop=r}))}))}()}();