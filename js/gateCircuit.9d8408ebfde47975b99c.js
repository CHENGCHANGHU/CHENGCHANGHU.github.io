!function(){"use strict";class t extends HTMLElement{#t=null;#e=null;#n=null;constructor(){super(),this.#t=this.attachShadow({mode:"closed"}),this.#t.appendChild(document.getElementById("page-header").content.cloneNode(!0)),this.#e=this.#t.querySelector("#manuscript-logo-img"),this.#n=this.#t.querySelector("#manuscript-logo-text")}connectedCallback(){this.#e.addEventListener("click",this.#o),this.#n.addEventListener("click",this.#o)}#o(){this.dispatchEvent(new CustomEvent("click-logo",{bubbles:!1,cancelable:!1,composed:!0,detail:{data:new Date}}))}#a(){const t=window.location.href;console.log(t),/manuscript/.test(t)?window.location.assign("/manuscript"):window.location.assign("/")}}function e(t){if(!t)return;if(t instanceof HTMLElement)return t;if(Array.isArray(t))return t.map((t=>e(t)));const{tag:n,text:o,html:a,children:i,attributes:r,events:s}=t;if(!n)return document.createElement("template");let l=null;return l=["svg","path"].includes(n)?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n),a&&(l.innerHTML=a),(o||0===o||""===o)&&(l.innerText=o),r&&Object.keys(r).forEach((t=>{"classes"===t&&Array.isArray(r[t])?l.className=r[t].join(" "):l.setAttribute("classes"===t?"class":t,r[t])})),s&&Object.keys(s).forEach((e=>{l.addEventListener(e,s[e].bind(t))})),i&&l.append(...i.filter(Boolean).map(e)),l}function n(t){const e=new Map;if(!e.has(t)){const n=document.getElementById(t);if(!n)return null;e.set(t,n)}return e.get(t)}document.getElementById("page-header")||(document.body.innerHTML+='<template id="page-header">\n  <style>\n    .page-header-box {\n      --logoSize: 36px;\n\n      position: fixed;\n      width: 100vw;\n      height: 48px;\n      top: 0;\n      display: flex;\n      flex-flow: row nowrap;\n      align-items: center;\n      padding: 0 8px;\n      font-size: 12px;\n      box-sizing: border-box;\n      z-index: 9999;\n      background-color: #32343d;\n      box-sizing: border-box;\n      box-shadow: 0px 2px 5px 3px rgba(0, 0, 0, 0.2);\n      color: #ffffff;\n    }\n\n    .manuscript-logo-box {\n      display: flex;\n      flex-flow: row nowrap;\n      align-items: center;\n    }\n\n    .manuscript-logo-img {\n      width: var(--logoSize);\n      transform: rotateY(180deg);\n      border: 1px solid #343434;\n      border-radius: 50%;\n      cursor: pointer;\n      background-color: #fff;\n    }\n\n    .manuscript-logo-text {\n      text-decoration: underline;\n      font-weight: bolder;\n      transition: all .3s ease-in-out;\n      cursor: pointer;\n      margin-left: 8px;\n    }\n\n    .manuscript-logo-text:hover {\n      color: rgb(3, 145, 98);\n    }\n\n    .page-title-box {\n      margin-left: 16px;\n      font-size: 16px;\n      font-weight: bolder;\n    }\n  </style>\n  <div class="page-header-box">\n    <div class="manuscript-logo-box">\n      <img\n        id="manuscript-logo-img"\n        class="manuscript-logo-img"\n        src="/assets/images/writing.a59d3288.png"\n        alt="tigercheng manuscript logo"\n      />\n      <div\n        id="manuscript-logo-text"\n        class="manuscript-logo-text"\n      >JavaScript Manuscript</div>\n    </div>\n    <div class="page-title-box">\n      <slot></slot>\n    </div>\n  </div>\n</template>'),customElements.define("page-header",t),window.addEventListener("load",(function(){n("add-horizontal-curve").addEventListener("click",(t=>{d("horizontal"),a++})),n("add-vertical-curve").addEventListener("click",(t=>{d("vertical"),a++}));const t={el:null,x:0,y:0,offsetX:0,offsetY:0};document.body.addEventListener("mouseover",(t=>{const{target:e}=t;"joint"===e.dataset.type&&(o.get(e).draggable=!0)})),document.body.addEventListener("mousedown",(e=>{const{target:n,x:a,y:i}=e;console.log(n),"joint"===n.dataset.type&&(o.get(n).dragging=!0,t.el=n,t.el.style.zIndex=999999,t.x=a,t.y=i,t.offsetX=a-n.offsetLeft,t.offsetY=i-n.offsetTop)})),document.body.addEventListener("mousemove",(e=>{const{x:n,y:a}=e;t.el&&o.get(t.el).dragging&&(o.get(t.el).x=n-t.offsetX,o.get(t.el).y=a-t.offsetY)})),document.body.addEventListener("mouseup",(e=>{t.el&&o.get(t.el).dragging&&(o.get(t.el).dragging=!1,t.el.style.zIndex="",t.el=null,t.x=0,t.y=0,t.offsetX=0,t.offsetY=0)}))}));const o=new Map;let a=1;function i(t,e,o){return{el:n(t),draggable:!1,dragging:!1,x:n(t).offsetLeft,y:n(t).offsetTop,type:e,curve:null}}function r(t,e){return t[e]}function s(t,e,n){try{switch(e){case"x":t.el.style.left=n+"px";break;case"y":t.el.style.top=n+"px"}const{curve:o}=t;if(o&&("x"===e||"y"===e)){const{x:t,y:e,tailJoint:n,headJoint:a,direction:i,path:r,arrow:s}=o;o.x=Math.min(a.x,n.x)-8,o.y=Math.min(a.y,n.y)-8,o.width=Math.abs(a.x-n.x)+16,o.height=Math.abs(a.y-n.y)+16,r.setAttribute("d",`M ${n.x-t} ${n.y-e} Q ${"horizontal"===i?.75*n.x+.25*a.x-t:n.x-t} ${"horizontal"===i?n.y-e:.75*n.y+.25*a.y-e} ${(a.x+n.x)/2-t} ${(a.y+n.y)/2-e} ${"horizontal"===i?.25*n.x+.75*a.x-t:a.x-t} ${"horizontal"===i?a.y-e:.25*n.y+.75*a.y-e} ${a.x-t} ${a.y-e}`),s.setAttribute("d",("horizontal"===i?Math.abs(a.x-n.x)>.2*Math.abs(a.y-n.y):.2*Math.abs(a.x-n.x)>Math.abs(a.y-n.y))?`M ${a.x-t} ${a.y-e} l ${a.x<n.x?"":"-"}8 5 v -10`:`M ${a.x-t} ${a.y-e} l 5 ${a.y<n.y?"":"-"}8 h -10`)}return t[e]=n,!0}catch(t){return!1}}function l(t,e){return t[e]}function c(t,e,n){try{switch(e){case"x":t.el.style.left=n+"px";break;case"y":t.el.style.top=n+"px";break;case"width":case"height":t.el.setAttribute(e,n)}return t[e]=n,!0}catch(t){return!1}}function d(t){n("content-box").append(...e([{tag:"svg",attributes:{id:`curve-${a}`,xmlns:"http://www.w3.org/2000/svg","data-type":"curve"},children:[{tag:"path",attributes:{id:`curve-path-${a}`,stroke:"black",fill:"transparent","data-type":"curve-path"}},{tag:"path",attributes:{id:`curve-arrow-${a}`,stroke:"black",fill:"black","data-type":"curve-arrow"}}]},{tag:"div",attributes:{id:"joint-"+2*a,classes:"joint","data-type":"joint"}},{tag:"div",attributes:{id:"joint-"+(2*a+1),classes:"joint","data-type":"joint"}}]));const d=new Proxy(i("joint-"+2*a,"curve-head"),{set:s,get:r}),g=new Proxy(i("joint-"+(2*a+1),"curve-tail"),{set:s,get:r}),u=new Proxy(function(t,e){return{draggable:!1,dragging:!1,el:n(t),path:n(t).querySelector("path"),arrow:n(t).querySelector("path:nth-of-type(2)"),direction:e,x:0,y:0,width:0,height:0,headJoint:null,tailJoint:null}}(`curve-${a}`,t),{set:c,get:l});u.headJoint=d,u.tailJoint=g,d.curve=u,g.curve=u,o.set(n("joint-"+2*a),d),o.set(n("joint-"+(2*a+1)),g)}}();